<?xml version="1.0" ?>
<scene version="0.6.0">
    <default name="cam_samples" value="2048"/>
	<sensor type="thinlens">
		<transform name="toWorld">
			<lookat origin="0, 0, 0" target="0, 0, 1" up="0, -1, 0"/>
		</transform>
        <float name="fov" value="$cam_fov_y"/>
        <string name="fovAxis" value="y"/>
        <float name="pixelAspect" value="$cam_pixelAspect"/>
		<float name="focusDistance" value="$cam_focus"/>
		<float name="apertureRadius" value="$cam_aperture"/>
        <float name="diffLimit" value="$cam_diffLimit"/>

		<sampler type="halton">
		    <integer name="sampleCount" value="$cam_samples"/>
		</sampler>

		<film type="hdrfilm">
            <string name="pixelFormat" value="rgba, luminance"/>
            <string name="fileFormat" value="openexr"/>
            <string name="channelNames" value="color, distance"/>
            <string name="componentFormat" value="float32"/>
		    <integer name="width" value="$cam_width"/>
		    <integer name="height" value="$cam_height"/>
            <!--<integer name="cropOffsetX" value="0"/>
            <integer name="cropOffsetY" value="0"/>
            <integer name="cropWidth" value="800"/>
            <integer name="cropHeight" value="600"/>-->
            <boolean name="banner" value="false"/>
            <rfilter type="box"/>
		</film>
	</sensor>

    <integrator type="multichannel">
        <integrator type="path">
            <integer name="maxDepth" value="128"/>
            <boolean name="hideEmitters" value="false"/>
        </integrator>
    <!--     <integrator type="bdpt">
            <integer name="maxDepth" value="128"/>
        </integrator> -->
        <integrator type="field">
            <string name="field" value="distance"/>
        </integrator>
    </integrator>

    <texture type="bitmap" id="pattern">
        <string name="filename" value="pattern.png"/>
        <string name="wrapMode" value="zero"/>
        <string name="filterType" value="nearest"/>
        <boolean name="cache" value="false"/>
        <float name="gamma" value="1.0"/>
    </texture>

    <emitter type="spot">
        <transform name="toWorld">
            <!--<lookat origin="0, 0, 0" target="0, 0, 1" up="0, -1, 0"/>-->
            <translate x="0.0" y="0" z="$offset"/>
        </transform>
        <ref name="texture" id="pattern"/>
        <spectrum name="intensity" value="$proj_intensity"/>
        <float name="scaleX" value="$proj_scaleX"/>
        <float name="scaleY" value="$proj_scaleY"/>
        <float name="offX" value="$proj_offsetX"/>
        <float name="offY" value="$proj_offsetY"/>
        <integer name="width" value="$proj_width"/>
        <integer name="height" value="$proj_height"/>
        <float name="apertureRadius" value="$proj_aperture"/>
        <float name="focusDistance" value="$proj_focus"/>
        <float name="diffLimit" value="$proj_diffLimit"/>
        <float name="gapSize" value="$proj_gapSize"/>
        <float name="samplingWeight" value="5.0"/>
    </emitter>

    <shape type="cube">
        <transform name="toWorld">
            <scale value="$scale"/>
            <rotate y="-1" angle="0"/>
            <translate x="0.0" y="0" z="$dist"/>
        </transform>

        <bsdf type="diffuse">
            <srgb name="reflectance" value="#FFFFFF"/>
            <!--<ref id="pattern" name="reflectance"/>-->
        </bsdf>
    </shape>

    <emitter type="directional">
        <vector name="direction" x="0.0" y="0.0" z="1.0"/>
        <spectrum name="irradiance" value="0.0"/>
        <float name="samplingWeight" value="1.0"/>
    </emitter>

    <!--<emitter type="constant">
        <spectrum name="radiance" value="1.0"/>
        <float name="samplingWeight" value="1.0"/>
    </emitter> -->
</scene>
